<h1>Car's parts</h1>

<% form_for @parts do |f| %>
  <p>
    <%= f.label :car_model_like, "Model" %><br />
    <%= f.text_field :car_model_like %>
  </p>
  <p>
    <%= f.label :car_year_gte, "Year Range" %><br />
    <%= f.text_field :car_year_gte, :size => 8 %> - <%= f.text_field :car_year_lte, :size => 8 %>
  </p>
  <p>
    <%= f.label :title_like, "Part" %><br />
    <%= f.text_field :title_like %>
  </p>
  <p>
    <!--= f.label :category_id_equals, "Category" %><br />
    <= f.collection_select :category_id_equals, Category.all, :id, :name, :include_blank => true % -->
  </p>
  <p>
    <%= f.label :final_cost_gte, "Price Range" %><br />
    <%= f.text_field :final_cost_gte, :size => 8 %> - <%= f.text_field :final_cost_lte, :size => 8 %>
  </p>
  <p>
    <%= f.label :bonus_gte, "Bonus Range" %><br />
    <%= f.text_field :bonus_gte, :size => 8 %> - <%= f.text_field :bonus_lte, :size => 8 %>
  </p>
  <p>
    <%= f.submit "Submit" %>
  </p>
<% end %>

<table>
  <tr>
    <th><%= order @parts, :by => :car_brand %></th>
    <th><%= order @parts, :by => :car_model %></th>
    <th><%= order @parts, :by => :car_year %></th>
    <th><%= order @parts, :by => :title, :as => 'Part' %></th>
    <th><%= order @parts, :by => :offstock %></th>
    <th><%= order @parts, :by => :retail_cost %></th>
    <th><%= order @parts, :by => :final_cost %></th>
    <th><%= order @parts, :by => :bonus %></th>
  </tr>

<% @parts.each do |part| %>
  <tr>
    <td><%=h part.car.brand %></td>
    <td><%=h part.car.model %></td>
    <td><%=h part.car.year %></td>
    <td><%=h part.title %></td>
    <td><%=h part.display_offstock %></td>
    <td><%=h part.retail_cost %></td>
    <td><%=h part.final_cost %></td>
    <td><%=h part.bonus %></td>
  </tr>
<% end %>
</table>
